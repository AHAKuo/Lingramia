<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="using:Lingramia.Views"
        x:Class="Lingramia.Views.PasswordSetDialog"
        x:DataType="views:PasswordSetDialogViewModel"
        Title="Set Password"
        Width="450"
        Height="380"
        MinHeight="350"
        WindowStartupLocation="CenterOwner"
        CanResize="False"
        SizeToContent="Manual">
    
    <Grid Margin="25">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <TextBlock Grid.Row="0"
                   Text="{Binding DialogTitle}"
                   FontSize="16"
                   FontWeight="Bold"
                   Margin="0,0,0,15"/>
        
        <TextBlock Grid.Row="1"
                   Text="{Binding DescriptionText}"
                   FontSize="12"
                   TextWrapping="Wrap"
                   Foreground="Gray"
                   Margin="0,0,0,20"/>
        
        <StackPanel Grid.Row="2" Spacing="8" Margin="0,0,0,10" IsVisible="{Binding RequiresCurrentPassword}">
            <TextBlock Text="Current Password:" FontSize="13" FontWeight="SemiBold"/>
            <TextBox Text="{Binding CurrentPassword, Mode=TwoWay}"
                     PasswordChar="●"
                     Watermark="Enter current password"
                     MinHeight="35"
                     KeyDown="OnCurrentPasswordKeyDown"/>
        </StackPanel>
        
        <StackPanel Grid.Row="3" Spacing="8" Margin="0,0,0,10" IsVisible="{Binding !IsRemoveMode}">
            <TextBlock Text="Password:" FontSize="13" FontWeight="SemiBold"/>
            <TextBox Text="{Binding Password, Mode=TwoWay}"
                     PasswordChar="●"
                     Watermark="Enter password"
                     MinHeight="35"/>
        </StackPanel>
        
        <StackPanel Grid.Row="4" Spacing="8" Margin="0,0,0,15" IsVisible="{Binding !IsRemoveMode}">
            <TextBlock Text="Confirm Password:" FontSize="13" FontWeight="SemiBold"/>
            <TextBox Text="{Binding ConfirmPassword, Mode=TwoWay}"
                     PasswordChar="●"
                     Watermark="Confirm password"
                     MinHeight="35"/>
        </StackPanel>
        
        <TextBlock Grid.Row="5"
                   Text="{Binding ErrorMessage}"
                   FontSize="12"
                   Foreground="Red"
                   TextWrapping="Wrap"
                   IsVisible="{Binding HasError}"
                   Margin="0,0,0,15"/>
        
        <StackPanel Grid.Row="6"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Spacing="10">
            <Button Content="Cancel"
                    Width="90"
                    Padding="12,6"
                    Click="OnCancelButtonClick"/>
            <Button Content="{Binding ButtonText}"
                    Width="120"
                    Padding="12,6"
                    Command="{Binding SetPasswordCommand}"
                    IsEnabled="{Binding CanSetPassword}"/>
        </StackPanel>
    </Grid>
</Window>

